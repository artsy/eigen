#!/usr/bin/env bash
set -e

# Creates a yarn patch for a package using Yarn 4's built-in patch protocol.
#
# Usage: ./scripts/utils/patch-package <package-name>
#
# This will:
# 1. Extract a clean copy of the package to a temp directory
# 2. Open the temp directory so you can make your changes
# 3. After you're done, run the printed `yarn patch-commit` command
#
# The patch will be saved to .yarn/patches/ and the resolution
# will be added to package.json automatically.

package_name="$1"

if [ -z "$package_name" ]; then
  echo "Usage: $0 <package-name>"
  echo ""
  echo "Example: $0 react-native-keys"
  echo ""
  echo "This will extract the package to a temp directory."
  echo "Make your changes there, then run the 'yarn patch-commit' command."
  exit 1
fi

echo "Starting patch for ${package_name}..."
echo ""

yarn patch "$package_name"
